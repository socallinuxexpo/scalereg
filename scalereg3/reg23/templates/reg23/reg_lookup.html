{% extends "reg23/reg_base.html" %}
{% load i18n %}
{% load reg23_filters %}
{% block content %}
<div id="content-main">

{% if search %}
    <hr />

    <p>
    {% if form.is_valid %}
        Search results for: {{ form.data.email }} and {{ form.data.zip_code }}.
    {% else %}
        Please fill out all required fields to search.
        {% if form.email.errors %}
        <p class="reg23_form_error">
            Email: {{ form.email.errors|join:", " }}
        </p>
        {% endif %}
        {% if form.zip_code.errors %}
        <p class="reg23_form_error">
            Zip/Postal Code: {{ form.zip_code.errors|join:", " }}
        </p>
        {% endif %}
    {% endif %}
    </p>

    {% if attendees %}
        <table border="1">
        <head>
        <tr>
            <th>Registration Number</th>
            <th>Name</th>
            <th>Paid For</th>
        </tr>
        </thead>
        <tbody>
        {% for person in attendees %}
            <tr>
            <td>{{ person.id }}</td>
            <td>{{ person.first_name }} {{ person.last_name }}</td>
            <td>
            {% if person.valid %}
            Yes
            {% else %}
            No
            {% endif %}
            </td>
            </tr>
        {% endfor %}
        </tbody>
        </table>
    {% endif %}

    <hr />
{% endif%}

<p>
Use this form to look up existing registrations. All fields are required.
</p>

<p>
<form method="post" action=".">
<table>
<tr>
    <td>Email</td>
    <td>{{ form.email }}</td>
</tr>
<tr>
    <td>Zip/Postal Code</td>
    <td>{{ form.zip_code }}</td>
</tr>
</table>
<input type="submit" class="scale_kiosk_bordered" value="Search" />
{% csrf_token %}
</form>
</p>

<p>
When you are done, click one of the buttons below
to return to your previous form.
</p>

<p>
<form method="get" action="../start_payment/">
<input type="submit" class="scale_kiosk_bordered" value="Pay For Registration" />
{% csrf_token %}
</form>
</p>
</div>
{% endblock %}

